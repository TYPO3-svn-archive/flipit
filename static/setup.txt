
  ///////////////////////////////////////////////////////////////
  //
  // INDEX
  //
  // includeLibs
  // plugin.tx_flipit.constant_editor
  // plugin.tx_flipit.master_templates
  // plugin.tx_flipit.pageObjects
  // tt_content.uploads
  // flipit_ajax



  ///////////////////////////////////////////////////////////////
  //
  // includeLibs

includeLibs {
  tx_browser_cssstyledcontent = EXT:flipit/lib/typoscript/class.tx_flipit_typoscript.php
}
  // includeLibs



  ///////////////////////////////////////////////////////////////
  //
  // plugin.tx_flipit.constant_editor

plugin.tx_flipit =
plugin.tx_flipit {
    // Configuration by the Constant Editor (extended)
  constant_editor =
  constant_editor {
      // Category configuration
    configuration =
    configuration {
        // Checks, if Flip it! is enabled. Returns disabled or enabled or an error message
      enabled = COA
      enabled {
          // Error prompt, if enabled mode isn't an element of the list disabled,enabled,ts
        10 = TEXT
        10 {
            // IF field:tx_flipit_enabled is not in list of 'disabled,enabled,ts'
          if = 
          if {
            value = disabled,enabled,ts
            isInList {
              field = tx_flipit_enabled
            }
            negate = 1
          }
          value (
            <div style="background:white;border:1em solid red;color:red;padding:1em;text-align:center;">
              <h1>TypoScript Error</h1>
              <p>
                '{field:tx_flipit_enabled}' isn't any element of the list: disabled,enabled,ts
              </p>
              <p>
                Flip it!
              </p>
            </div>
)
          lang.de (
            <div style="background:white;border:1em solid red;color:red;padding:1em;text-align:center;">
              <h1>TypoScript Fehler</h1>
              <p>
                '{field:tx_flipit_enabled}' ist kein Element der Liste: disabled,enabled,ts
              </p>
              <p>
                Flip it!
              </p>
            </div>
)
          insertData = 1
        }
          // RETURNS disabled or enabled
        20 = COA
        20 {
            // IF field:tx_flipit_enabled is in list of 'disabled,enabled,ts'
          if = 
          if {
            value = disabled,enabled,ts
            isInList {
              field = tx_flipit_enabled
            }
          }
            // disabled || enabled
          10 = TEXT
          10 {
            if {
              value = disabled,enabled
              isInList {
                field = tx_flipit_enabled
              }
            }
            field = tx_flipit_enabled
          }
            // ts
          20 = TEXT
          20 {
            if {
              value = ts
              equals {
                field = tx_flipit_enabled
              }
            }
            value = {$plugin.tx_flipit.configuration.enable}
          }
        }
      }
        // RETURNS disabled or enabled
      updateSwfXml = COA
      updateSwfXml {
            // IF field:tx_flipit_updateswfxml is in list of 'disabled,enabled,ts'
          if = 
        if {
          value = disabled,enabled,ts
          isInList {
            field = tx_flipit_updateswfxml
          }
        }
          // disabled || enabled
        10 = TEXT
        10 {
          if {
            value = disabled,enabled
            isInList {
              field = tx_flipit_updateswfxml
            }
          }
          field = tx_flipit_updateswfxml
        }
          // ts
        20 = TEXT
        20 {
          if {
            value = ts
            equals {
              field = tx_flipit_updateswfxml
            }
          }
          value = {$plugin.tx_flipit.configuration.updateswfxml} 
        }
      }
    }
      // Category database
    database = 
    database {
        // Table : Current table. Example: tt_content, tx_org_downloads
      table = {$plugin.tx_flipit.database.table} 
        // Media field : Label of the field, which contains the files for converting to SWF / Flash
      fieldMedia = {$plugin.tx_flipit.database.fieldMedia} 
    }
      // Category fancybox
    fancybox = 
    fancybox {
        // Fancybox : Disable it, if you don't want to use Flip it! in a fancybox by default.
      enable = {$plugin.tx_flipit.fancybox.enable}
        // padding : Space between FancyBox wrapper and content
      padding = {$plugin.tx_flipit.fancybox.padding}
        // margin : Space between viewport and FancyBox wrapper
      margin = {$plugin.tx_flipit.fancybox.margin}
        // opacity : When true, transparency of content is changed for elastic transitions
      opacity = {$plugin.tx_flipit.fancybox.opacity}
        // modal : When true, 'overlayShow' is set to 'true' and 'hideOnOverlayClick', 'hideOnContentClick', 'enableEscapeButton', 'showCloseButton' are set to 'false'
      modal = {$plugin.tx_flipit.fancybox.modal}
        // cyclic : When true, galleries will be cyclic, allowing you to keep pressing next/back.
      cyclic = {$plugin.tx_flipit.fancybox.cyclic}
        // scrolling : Set the overflow CSS property to create or hide scrollbars. Can be set to 'auto', 'yes', or 'no'
      scrolling = TEXT
      scrolling {
        value = {$plugin.tx_flipit.fancybox.scrolling}
        wrap  = '|'
      }
        // width : Width for content types 'iframe' and 'swf'. Also set for inline content if 'autoDimensions' is set to 'false'
      width = {$plugin.tx_flipit.fancybox.width}
        // height : Height for content types 'iframe' and 'swf'. Also set for inline content if 'autoDimensions' is set to 'false'
      height = {$plugin.tx_flipit.fancybox.height}
        // autoScale : If true, FancyBox is scaled to fit in viewport 
      autoScale = {$plugin.tx_flipit.fancybox.autoScale}
        // autoDimensions : For inline and ajax views, resizes the view to the element recieves. Make sure it has dimensions otherwise this will give unexpected results
      autoDimensions = {$plugin.tx_flipit.fancybox.autoDimensions}
        // centerOnScroll : When true, FancyBox is centered while scrolling page
      centerOnScroll = {$plugin.tx_flipit.fancybox.centerOnScroll}
        // hideOnOverlayClick : Toggle if clicking the overlay should close FancyBox
      hideOnOverlayClick = {$plugin.tx_flipit.fancybox.hideOnOverlayClick}
        // hideOnContentClick : Toggle if clicking the content should close FancyBox
      hideOnContentClick = {$plugin.tx_flipit.fancybox.hideOnContentClick}
        // overlayShow : Toggle overlay
      overlayShow = {$plugin.tx_flipit.fancybox.overlayShow}
        // overlayOpacity : Opacity of the overlay (from 0 to 1; default - 0.3)
      overlayOpacity = {$plugin.tx_flipit.fancybox.overlayOpacity}
        // overlayColor : Color of the overlay
      overlayColor = {$plugin.tx_flipit.fancybox.overlayColor}
        // title : Forces title. Take a field of the current record.
      title = TEXT
      title {
        field = {$plugin.tx_flipit.fancybox.title}
      }
        // titleShow : Toggle title
      titleShow = {$plugin.tx_flipit.fancybox.titleShow}
        // titlePosition : The position of title. Can be set to 'outside', 'inside' or 'over'
      titlePosition = TEXT
      titlePosition {
        value = {$plugin.tx_flipit.fancybox.titlePosition}
        wrap  = '|'
      }
        // transitionIn : The transition type. Can be set to 'elastic', 'fade' or 'none'
      transitionIn = TEXT
      transitionIn {
        value = {$plugin.tx_flipit.fancybox.transitionIn}
        wrap  = '|'
      }
        // transitionOut : The transition type. Can be set to 'elastic', 'fade' or 'none'
      transitionOut = TEXT
      transitionOut {
        value = {$plugin.tx_flipit.fancybox.transitionOut}
        wrap  = '|'
      }
        // speedIn : Speed of the fade and elastic transitions, in milliseconds
      speedIn = {$plugin.tx_flipit.fancybox.speedIn}
        // speedOut : Speed of the fade and elastic transitions, in milliseconds
      speedOut = {$plugin.tx_flipit.fancybox.speedOut}
        // showCloseButton : Toggle close button
      showCloseButton = {$plugin.tx_flipit.fancybox.showCloseButton}
        // showNavArrows : Toggle navigation arrows
      showNavArrows = {$plugin.tx_flipit.fancybox.showNavArrows}
        // enableEscapeButton : Toggle if pressing Esc button closes FancyBox
      enableEscapeButton = {$plugin.tx_flipit.fancybox.enableEscapeButton}
        // type : Forces content type. Can be set to 'image', 'ajax', 'iframe', 'swf' or 'inline'
      type = TEXT
      type {
        value = {$plugin.tx_flipit.fancybox.type}
        wrap  = '|'
      }
    }
      // Category html
    html = 
    html {
        // Height : Height with em, per cent or pixel
      height = {$plugin.tx_flipit.html.height}
        // Width : Width with em, per cent or pixel
      width = {$plugin.tx_flipit.html.width}
        // Background colour
      background = {$plugin.tx_flipit.html.color.background}
    }
      // Category jquery
    jquery = 
    jquery {
        // Fancybox : enabled || disabled. Use the jQuery fancybox library (1.3.4) provided by Flip it! If you are using another fancybox library, please set this option to "disabled"
      fancybox = {$plugin.tx_flipit.jquery.fancybox}
      fancybox = COA
      fancybox {
          // Error prompt, if enabled mode isn't an element of the list enabled,disabled,ts
        10 = TEXT
        10 {
            // IF field:tx_flipit_fancybox is not in list of 'enabled,disabled,ts'
          if = 
          if {
            value = enabled,disabled,ts
            isInList {
              field = tx_flipit_fancybox
            }
            negate = 1
          }
          value (
            <div style="background:white;border:1em solid red;color:red;padding:1em;text-align:center;">
              <h1>TypoScript Error</h1>
              <p>
                '{field:tx_flipit_fancybox}' isn't any element of the list: enabled,disabled,ts
              </p>
              <p>
                Flip it!
              </p>
            </div>
)
          lang.de (
            <div style="background:white;border:1em solid red;color:red;padding:1em;text-align:center;">
              <h1>TypoScript Fehler</h1>
              <p>
                '{field:tx_flipit_fancybox}' ist kein Element der Liste: enabled,disabled,ts
              </p>
              <p>
                Flip it!
              </p>
            </div>
)
          insertData = 1
        }
          // RETURNS disabled or enabled
        20 = COA
        20 {
            // IF field:tx_flipit_fancybox is in list of 'enabled,disabled,ts'
          if = 
          if {
            value = enabled,disabled,ts
            isInList {
              field = tx_flipit_fancybox
            }
          }
            // disabled || enabled
          10 = TEXT
          10 {
            if {
              value = enabled,disabled
              isInList {
                field = tx_flipit_fancybox
              }
            }
            field = tx_flipit_fancybox
          }
            // ts
          20 = TEXT
          20 {
            if {
              value = ts
              equals {
                field = tx_flipit_fancybox
              }
            }
            value = {$plugin.tx_flipit.jquery.fancybox}
          }
        }
      }
        // Fancybox position : Place the jQuery fancybox library at the top of the page (HTML head) or at the bottom
      fancyboxPosition = {$plugin.tx_flipit.jquery.fancyboxPosition}
        // Fancybox library
      fancyboxLibrary = {$plugin.tx_flipit.jquery.fancyboxLibrary}
        // Fancybox CSS
      fancyboxCSS = {$plugin.tx_flipit.jquery.fancyboxCSS}
        // jQuery : Use the jQuery fancybox library (1.3.4) provided by Flip it! If you are using another fancybox library, please set this option to "disabled"
      source = {$plugin.tx_flipit.jquery.source}
    }
      // Category xml
    xml =
    xml {
        // Document width : Width in pixel (if autodetection failes)
      width = {$plugin.tx_flipit.xml.width}
        // Document height : Height in pixel (if autodetection failes)
      height = {$plugin.tx_flipit.xml.height}
        // Colour of buttons:
      buttoncolor = {$plugin.tx_flipit.xml.buttoncolor}
        // Colour of the panel:
      panelcolor = {$plugin.tx_flipit.xml.panelcolor}
        // Colour of the font:
      textcolor = {$plugin.tx_flipit.xml.textcolor}
        // Colour of the background:
      backgroundcolor = {$plugin.tx_flipit.xml.backgroundcolor}
        // Hardcorver : If set to true, fist and last page are hard covered.
      hcover =  {$plugin.tx_flipit.xml.hcover}
        // Goto label
      gotolabel = TEXT
      gotolabel {
        value = {$plugin.tx_flipit.xml.gotolabel.default}
        lang {
          de = {$plugin.tx_flipit.xml.gotolabel.de}
          en = {$plugin.tx_flipit.xml.gotolabel.default}
        }
      }
    }
  }
}
  // plugin.tx_flipit.constant_editor



  ///////////////////////////////////////////////////////////////
  //
  // plugin.tx_flipit.master_templates

plugin.tx_flipit =
plugin.tx_flipit {
    // For tt_content.uploads
  master_templates =
  master_templates {
      // Please copy to tt_content.uploads.20.itemRendering
    flip_it = USER
    flip_it {
        // constant_editor, content, html_snippets
      userFunc = tx_flipit_typoscript->main
      userFunc {
          // Values from constant editor
        constant_editor < plugin.tx_flipit.constant_editor
          // Content will rendered only, if Flip it! is enabled. See master_templates.flip_it.userFunc.constant_editor.configuration.enabled ...
        content = COA
        content {
            // Fancybox begin
          10 = COA
          10 {
              // Fancybox: ERROR
            10 = TEXT
            10 {
                // IF field:tx_flipit_fancybox is not in list of 'enabled,disabeld,ts'
              if = 
              if {
                value = enabled,disabled,ts
                isInList {
                  field = tx_flipit_fancybox
                }
                negate = 1
              }
              value (
                <div style="background:white;border:1em solid red;color:red;padding:1em;text-align:center;">
                  <h1>TypoScript Error</h1>
                  <p>
                    '{field:tx_flipit_fancybox}' isn't any element of the list: enabled,disabled,ts
                  </p>
                  <p>
                    Flip it!
                  </p>
                </div>
)
              lang.de (
                <div style="background:white;border:1em solid red;color:red;padding:1em;text-align:center;">
                  <h1>TypoScript Fehler</h1>
                  <p>
                    '{field:tx_flipit_fancybox}' ist kein Element der Liste: enabled,disabled,ts
                  </p>
                  <p>
                    Flip it!
                  </p>
                </div>
)
              insertData = 1
            }
              // Fancybox enabled 1/2
            20 = COA
            20 {
                // IF constant_editor.jquery.fancybox = enabled
              if = 
              if {
                value = enabled
                equals {
                  cObject < plugin.tx_flipit.master_templates.flip_it.userFunc.constant_editor.jquery.fancybox
                }
              }
                // Javascript
              10 = COA
              10 {
                  // SCRIPT part 1/2: without insertData!
                10 = TEXT
                10 {
                  value (

                    <script type="text/javascript">
                      $(document).ready(function() 
                      {
)
                  insertData = 0
                }
                  // SCRIPT part 2/2: with insertData
                20 = TEXT
                20 {
                  value (

                        $("#c{field:uid}_flipit_link").fancybox(
)
                  insertData = 1
                }
                30 = TEXT
                30 {
                  value (

                        {
)
                  insertData = 0
                }
                40 = COA
                40 {
                    // width
                  10 = TEXT
                  10 {
                    value < plugin.tx_flipit.master_templates.flip_it.userFunc.constant_editor.fancybox.width
                    noTrimWrap = | 'width' : ||
                  }
                    // height
                  20 = TEXT
                  20 {
                    value < plugin.tx_flipit.master_templates.flip_it.userFunc.constant_editor.fancybox.height
                    noTrimWrap = |, 'height' : ||
                  }
                    // autoDimensions
                  30 = COA
                  30 {
                    10 = TEXT
                    10 {
                      value < plugin.tx_flipit.master_templates.flip_it.userFunc.constant_editor.fancybox.autoDimensions
                      noTrimWrap = |, 'autoDimensions' : ||
                    }
                    20 < plugin.tx_flipit.master_templates.flip_it.userFunc.constant_editor.fancybox.autoDimensions
                    30 = TEXT
                    30 {
                      value < plugin.tx_flipit.master_templates.flip_it.userFunc.constant_editor.fancybox.autoDimensions
                      noTrimWrap = |, 'autoDimensions' : ||
                    }
                  }
                    // titlePosition
                  40 = TEXT
                  40 {
                    value < plugin.tx_flipit.master_templates.flip_it.userFunc.constant_editor.fancybox.titlePosition
                    noTrimWrap = |, 'titlePosition' : ||
                  }
                    // overlayShow
                  50 = TEXT
                  50 {
                    value < plugin.tx_flipit.master_templates.flip_it.userFunc.constant_editor.fancybox.overlayShow
                    noTrimWrap = |, 'overlayShow' : ||
                  }
                    // transitionIn
                  60 = TEXT
                  60 {
                    value < plugin.tx_flipit.master_templates.flip_it.userFunc.constant_editor.fancybox.transitionIn
                    noTrimWrap = |, 'transitionIn' : ||
                  }
                    // transitionOut
                  70 = TEXT
                  70 {
                    value < plugin.tx_flipit.master_templates.flip_it.userFunc.constant_editor.fancybox.transitionOut
                    noTrimWrap = |, 'transitionOut' : ||
                  }
                }
                50 = TEXT
                50 {
                  value (

                        });
                      });
                    </script>
)
                  insertData = 0
                }
              }
              10 >
              10 = USER
              10 {
                  // params, variables, javascript
                userFunc = tx_flipit_typoscript->javascriptFancyboxScript
                userFunc {
                    // Parameter from constant editor for the javascript
                  params < plugin.tx_flipit.constant_editor.fancybox
                    // Parameter from constant editor for the javascript
                  paramsSpaceLeft = 26
                    // Variables for the javascript
                  variables = 
                  variables {
                      // field:uid
                    uid = TEXT
                    uid {
                      value       = {field:uid}
                      insertData  = 1
                    }
                  } 
                    // Script
                  javascript (

                    <script type="text/javascript">
                      $(document).ready(function() {
                        $("#c%uid%_flipit_link").fancybox({
                          %params%                         
                        });
                      });
                    </script>
)
                }
              }
              
                // A tag
              30 = TEXT
              30 {
                value (

                  <a id="c{field:uid}_flipit_link" href="#c{field:uid}_flipit" title="{field:header}">{field:header}</a>              
)
                insertData = 1
              }
                // DIV "display:none" 1/2: begin
              40 = TEXT
              40 {
                value (

                  <div style="display: none;">
)
              }
            }
          }
            // Content
          20 = TEXT
          20 {
            value ( 

                    <script src="typo3conf/ext/flipit/res/js/swfobjects_1.4.4/swfobject.js" type="text/javascript"></script>
                    <div id="c{field:uid}_flipit" style="width:{$plugin.tx_flipit.master_templates.flip_it.userFunc.constant_editor.html.width}; height:{$plugin.tx_flipit.master_templates.flip_it.userFunc.constant_editor.html.height};overflow:auto;">
                      <p>
                        To view Flip it!, you need the latest <a href="http://adobe.com/go/getflashplayer">Flash player</a>
                      </p>
                    </div>
                    <script type="text/javascript">
                      var so = new SWFObject("typo3conf/ext/flipit/res/swf/book.swf", "book", "100%", "100%", "8", "{$plugin.tx_flipit.master_templates.flip_it.userFunc.constant_editor.html.color.background}");
                      so.addVariable("xmlFile","uploads/tx_flipit/{field:tx_flipit_xml_file}?{field:tstamp}");
                      so.addVariable("fullscreen","true");
                      so.write("c{field:uid}_flipit");
                    </script>
)
            insertData = 1
          }
            // Fancybox enabled 2/2: DIV "display:none" 2/2: end
          30 = TEXT
          30 {
              // IF constant_editor.jquery.fancybox = enabled
            if = 
            if {
              value = enabled
              equals {
                cObject < plugin.tx_flipit.master_templates.flip_it.userFunc.constant_editor.jquery.fancybox
              }
            }
            value ( 
              </div>
)
          }
        }
        htmlSnippets =
        htmlSnippets {
          css = 
          css {
            fancybox = TEXT
            fancybox {
              value = <link rel="stylesheet" type="text/css" href="{$plugin.tx_flipit.master_templates.flip_it.userFunc.constant_editor.jquery.fancyboxCSS}" media="screen" />
            }
          }
          js = 
          js {
            fancyboxLibrary = TEXT
            fancyboxLibrary {
              value = <script src="{$plugin.tx_flipit.master_templates.flip_it.userFunc.constant_editor.jquery.fancyboxLibrary}" type="text/javascript"></script>
            }
          }
        }
      }
    } 
  }
}
  // plugin.tx_flipit.master_templates



  ///////////////////////////////////////////////////////////////
  //
  // plugin.tx_flipit.pageObjects

plugin.tx_flipit =
plugin.tx_flipit {
  pageObjects {
    page = PAGE
    page {
      typeNum = {$plugin.tx_flipit.typeNum.ajaxPageObj}
      config {
        disableAllHeaderCode  = 1
        xhtml_cleaning        = 0
        admPanel              = 0
      }
      10 = CONTENT
      10 {
        table = {$plugin.tx_flipit.database.table}
        select {
            // use current language
          languageField = sys_language_uid
          andWhere {
            cObject = COA
            cObject {
                // uid = GP:tx_flipit|uid
              10 = TEXT
              10 {
                data = GP:tx_flipit|uid
                wrap = uid = |
              }
                // AND 
              20 = TEXT
              20 {
                value       = AND
                noTrimWrap  = | | |
              }
                // pid = {page:uid}
              21 = TEXT
              21 {
                dataWrap = pid = {page:uid}
              }
            }
          }
        }
      }
      20 = COA
      20 {
          // uid = GP:tx_flipit|uid
        10 = TEXT
        10 {
          data = GP:tx_flipit|uid
          wrap = uid = |
        }
          // AND 
        20 = TEXT
        20 {
          value       = AND
          noTrimWrap  = | | |
        }
          // pid = {page:uid}
        21 = TEXT
        21 {
          dataWrap = pid = {page:uid}
        }
      }
    }
  }
}
  // plugin.tx_flipit.pageObjects



  ///////////////////////////////////////////////////////////////
  //
  // tt_content.uploads

tt_content.uploads {
  20 {
      // Don't outerWrap the thumbnail with <table> by default
    outerWrap = |
    itemRendering >
    itemRendering < plugin.tx_flipit.master_templates.flip_it
  }
}
  // tt_content.uploads



  ///////////////////////////////////////////////////////////////
  //
  // pages: Flipt it! Ajax

  // Flip it! ajax page object. In case of localisation: Configure the id of sys_languagein the Constant Editor. Move in this line ...jQuery.default to ...jQuery.de (i.e.)
flipit_ajax < plugin.tx_flipit.pageObjects.page

[globalVar = GP:type = {$plugin.tx_flipit.typeNum.ajaxPageObj}]
    // Don't handle header of content element
  lib.stdheader >
[global]
  // pages: Flipt it! Ajax
